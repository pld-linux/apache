
__FILE__ expands to the full pathname during VPATH builds; this
clutters up the debug log (and also bloats binaries very slightly).
The -pie patch defines AP_FNAME during build which is equivalent
to basename(__FILE__); use that for debug logging where available.

AP_FNAME uses $(notdir ...), a GNU make extension, so this can't
go upstream.

Note this patch depends on the pie patch.

--- httpd-2.3.8/include/http_log.h~	2010-06-14 22:59:05.000000000 +0300
+++ httpd-2.3.8/include/http_log.h	2010-09-01 13:18:19.608547664 +0300
@@ -213,7 +213,11 @@
 
 extern int AP_DECLARE_DATA ap_default_loglevel;
 
+#ifdef AP_FNAME
+#define APLOG_MARK      AP_FNAME,__LINE__,APLOG_MODULE_INDEX
+#else
 #define APLOG_MARK     __FILE__,__LINE__,APLOG_MODULE_INDEX
+#endif
 
 /**
  * Set up for logging to stderr.
